local zplug_file=~/.zplug/init.zsh
if [[ -r ${zplug_file} ]]; then
  source ${zplug_file}

  zplug 'zplug/zplug', hook-build:'zplug --self-manage'
  zplug 'zsh-users/zsh-syntax-highlighting'
  zplug 'zsh-users/zaw'
  zplug 'Tarrasch/zsh-functional'

  if ! zplug check; then
    zplug install
  fi

  zplug load

  # Config for zsh-syntax-highlighting.
  ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets pattern cursor)
  ZSH_HIGHLIGHT_PATTERNS+=('rm -rf *' 'fg=white,bold,bg=red')

  # Config for zaw.
  [[ $(whence -w zaw-history) == *:\ function ]] && bindkey '^T' zaw-history
  zstyle ':filter-select:highlight' matched fg=yellow,standout
  zstyle ':filter-select' extended-search yes  # !-negated + smartcase search.
  zstyle ':filter-select' max-lines 50
fi
